(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),i=a(6),o=a.n(i),s=(a(14),a(9)),r=a(2),u=a(0);function l(){return Object(u.jsx)("header",{className:"header",children:Object(u.jsx)("div",{className:"header__container",children:Object(u.jsx)("a",{href:"https://maximka76667.github.io",className:"logo",rel:"noreferrer",target:"_blank",children:" "})})})}function p(){var e=(new Date).getFullYear();return Object(u.jsx)("footer",{className:"footer",children:Object(u.jsx)("div",{className:"footer__container",children:Object(u.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",e,". \u041c\u0430\u043a\u0441\u0438\u043c \u0413\u0440\u0438\u0432\u0435\u043d\u043d\u044b\u0439"]})})})}var d=c.a.createContext();function _(e){var t=e.card,a=e.onClick,n=e.onCardLike,i=e.onCardDelete,o=c.a.useContext(d),s=t.owner._id===o._id,r=t.likes.some((function(e){return e._id===o._id})),l="card__like-button ".concat(r?"card__like-button_active":"card__like-button_disabled");return Object(u.jsxs)("article",{className:"card",children:[Object(u.jsx)("img",{src:t.link,alt:t.name,className:"card__image",onClick:function(){a(t)}}),s?Object(u.jsx)("button",{className:"card__delete-button",onClick:function(){i(t)}}):null,Object(u.jsxs)("div",{className:"card__info",children:[Object(u.jsx)("h2",{className:"card__title",children:t.name}),Object(u.jsxs)("div",{className:"card__like",children:[Object(u.jsx)("button",{className:l,type:"button",onClick:function(){n(t)}}),Object(u.jsx)("p",{className:"card__likes-count",children:t.likes.length})]})]})]})}function b(e){var t=e.cards,a=c.a.useContext(d);return Object(u.jsxs)("main",{className:"content",children:[Object(u.jsx)("div",{className:"profile",children:Object(u.jsxs)("div",{className:"profile__container",children:[Object(u.jsx)("div",{className:"profile__avatar",onClick:e.onEditAvatar,children:Object(u.jsx)("img",{src:a.avatar,className:"profile__avatar-image",alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"})}),Object(u.jsxs)("div",{className:"profile__info",children:[Object(u.jsx)("h1",{className:"profile__name",children:a.name}),Object(u.jsx)("button",{className:"profile__edit-button",type:"button",onClick:e.onEditProfile}),Object(u.jsx)("p",{className:"profile__description",children:a.about})]}),Object(u.jsx)("button",{className:"profile__add-button",type:"button",onClick:e.onAddPlace})]})}),Object(u.jsx)("div",{className:"cards",children:Object(u.jsx)("div",{className:"cards__container",children:t.map((function(t){return Object(u.jsx)(_,{card:t,onClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})})]})}function j(e){var t=e.card,a=e.isOpen,n=e.onClose;return Object(u.jsxs)("div",{className:"popup popup_type_image ".concat(a?"popup_opened":""),children:[Object(u.jsx)("div",{className:"popup__overlay popup__overlay_type_image",onClick:n}),Object(u.jsxs)("div",{className:"popup__container popup__container_type_image",children:[Object(u.jsx)("img",{src:t?t.link:"",alt:t?t.name:"",className:"popup__image"}),Object(u.jsx)("h2",{className:"popup__title popup__title_type_image",children:t?t.name:""}),Object(u.jsx)("button",{className:"popup__close-button",type:"button",onClick:n})]})]})}var h=a(7),f=a(8),m=new(function(){function e(t){var a=t.baseUrl,n=t.authorization;Object(h.a)(this,e),this._baseUrl=a,this._token=n}return Object(f.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"setProfileInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}},{key:"getProfileInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._checkResponse)}},{key:"addPlace",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}},{key:"removeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:t?"DELETE":"PUT",headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"changeAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then(this._checkResponse)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-22",authorization:"6e0d021d-4f3f-452d-8c82-5a27e9592d29"});function O(e){var t=e.isOpen,a=e.isLoading,n=e.name,c=e.title,i=e.onSubmit,o=e.submitText,s=e.onClose,r=e.children,l=e.isSubmitValid,p="popup__submit-button ".concat(l?"":"popup__submit-button_disabled");return Object(u.jsxs)("div",{className:"popup popup_type_".concat(n," ").concat(t?"popup_opened":""),children:[Object(u.jsx)("div",{className:"popup__overlay popup__overlay_type_remove",onClick:s}),Object(u.jsxs)("div",{className:"popup__container popup__container_type_remove",children:[Object(u.jsx)("h2",{className:"popup__title",children:c}),Object(u.jsxs)("form",{className:"popup__form",name:n,onSubmit:i,noValidate:!0,children:[r,Object(u.jsx)("button",{className:p,type:"submit",disabled:!l,children:a?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":o})]}),Object(u.jsx)("button",{className:"popup__close-button",type:"button",onClick:s})]})]})}function v(e){var t=e.isOpen,a=e.isLoading,n=e.onClose,i=e.onUpdateUser,o=c.a.useContext(d),s=c.a.useState(""),l=Object(r.a)(s,2),p=l[0],_=l[1],b=c.a.useState(""),j=Object(r.a)(b,2),h=j[0],f=j[1],m=c.a.useState(""),v=Object(r.a)(m,2),x=v[0],g=v[1],k=c.a.useState(""),C=Object(r.a)(k,2),N=C[0],y=C[1],S=c.a.useState(!1),L=Object(r.a)(S,2),P=L[0],E=L[1],T=c.a.useState(!1),U=Object(r.a)(T,2),D=U[0],A=U[1],z=c.a.useState(!1),I=Object(r.a)(z,2),w=I[0],R=I[1],M="popup__input ".concat(P?"popup__input_type_error":""),V="popup__input ".concat(D?"popup__input_type_error":""),q="popup__error ".concat(P?"popup__error_visible":""),F="popup__error ".concat(D?"popup__error_visible":"");function J(e){var t=e.target;switch(t.name){case"profileName":t.validity.valid?(E(!1),g(""),R(!0)):(E(!0),g(t.validationMessage),R(!1));break;case"profilePosition":t.validity.valid?(A(!1),y(""),R(!0)):(A(!0),y(t.validationMessage),R(!1))}}return c.a.useEffect((function(){_(o.name),f(o.about)}),[t,o]),c.a.useEffect((function(){E(!1),A(!1),R(!0),g(""),y("")}),[t]),Object(u.jsxs)(O,{name:"edit",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",submitText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,isLoading:a,isSubmitValid:w,onClose:n,onSubmit:function(e){e.preventDefault(),i({name:p,about:h})},children:[Object(u.jsx)("input",{className:M,type:"text",name:"profileName",id:"profileName",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",minLength:"2",maxLength:"40",required:!0,value:"".concat(p),onChange:function(e){_(e.target.value),J(e)}}),Object(u.jsx)("span",{className:q,children:P&&x}),Object(u.jsx)("input",{className:V,type:"text",name:"profilePosition",id:"profilePosition",placeholder:"\u0412\u0430\u0448\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",minLength:"2",maxLength:"200",required:!0,value:"".concat(h),onChange:function(e){f(e.target.value),J(e)}}),Object(u.jsx)("span",{className:F,children:D&&N})]})}function x(e){var t=e.isOpen,a=e.isLoading,n=e.onClose,i=e.onUpdateAvatar,o=c.a.useContext(d),s=c.a.useState(""),l=Object(r.a)(s,2),p=l[0],_=l[1],b=c.a.useState(""),j=Object(r.a)(b,2),h=j[0],f=j[1],m=c.a.useState(!1),v=Object(r.a)(m,2),x=v[0],g=v[1],k=c.a.useState(!1),C=Object(r.a)(k,2),N=C[0],y=C[1],S="popup__input ".concat(x?"popup__input_type_error":""),L="popup__error ".concat(x?"popup__error_visible":"");return c.a.useEffect((function(){_("")}),[t,o]),c.a.useEffect((function(){g(!1),y(!1),f("")}),[t]),Object(u.jsxs)(O,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:t,isLoading:a,isSubmitValid:N,onClose:n,onSubmit:function(e){e.preventDefault(),i({avatar:p})},submitText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(u.jsx)("input",{className:S,type:"url",name:"avatarLink",id:"avatarLink",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",minLength:"2",required:!0,onChange:function(e){_(e.target.value),function(e){var t=e.target;t.validity.valid?(g(!1),f(""),y(!0)):(g(!0),f(t.validationMessage),y(!1))}(e)},value:p}),Object(u.jsx)("span",{className:L,id:"avatarLink-error",children:x?h:""})]})}function g(e){var t=e.isOpen,a=e.isLoading,n=e.onClose,i=e.onAddPlace,o=c.a.useState(""),s=Object(r.a)(o,2),l=s[0],p=s[1],d=c.a.useState(""),_=Object(r.a)(d,2),b=_[0],j=_[1],h=c.a.useState(""),f=Object(r.a)(h,2),m=f[0],v=f[1],x=c.a.useState(""),g=Object(r.a)(x,2),k=g[0],C=g[1],N=c.a.useState(!1),y=Object(r.a)(N,2),S=y[0],L=y[1],P=c.a.useState(!1),E=Object(r.a)(P,2),T=E[0],U=E[1],D=c.a.useState(!1),A=Object(r.a)(D,2),z=A[0],I=A[1],w="popup__input ".concat(S?"popup__input_type_error":""),R="popup__input ".concat(T?"popup__input_type_error":""),M="popup__error ".concat(S?"popup__error_visible":""),V="popup__error ".concat(T?"popup__error_visible":"");function q(e){var t=e.target;switch(t.name){case"placeName":t.validity.valid?(L(!1),v("")):(L(!0),v(t.validationMessage));break;case"placeLink":t.validity.valid?(U(!1),C("")):(U(!0),C(t.validationMessage))}}return c.a.useEffect((function(){p(""),j("")}),[t]),c.a.useEffect((function(){L(!1),U(!1),I(!1),v(""),C("")}),[t]),c.a.useEffect((function(){I(!(S||T||!l||!b))}),[S,T,l,b]),Object(u.jsxs)(O,{name:"add",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:t,isLoading:a,isSubmitValid:z,onClose:n,onSubmit:function(e){e.preventDefault(),i({name:l,link:b})},submitText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",children:[Object(u.jsx)("input",{className:w,type:"text",name:"placeName",id:"placeName",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"2",maxLength:"30",required:!0,value:l,onChange:function(e){p(e.target.value),q(e)}}),Object(u.jsx)("span",{className:M,id:"placeName-error",children:S&&m}),Object(u.jsx)("input",{className:R,type:"url",name:"placeLink",id:"placeLink",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",minLength:"2",required:!0,value:b,onChange:function(e){j(e.target.value),q(e)}}),Object(u.jsx)("span",{className:V,id:"placeLink-error",children:T&&k})]})}function k(e){var t=e.isOpen,a=e.isLoading,n=e.onClose,c=e.onCardDelete,i=e.card;return Object(u.jsx)(O,{name:"remove",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:t,isLoading:a,onClose:n,onSubmit:function(e){e.preventDefault(),c(i)},submitText:"\u0414\u0430",isSubmitValid:!0})}var C=function(){var e=c.a.useState({}),t=Object(r.a)(e,2),a=t[0],n=t[1],i=c.a.useState(!1),o=Object(r.a)(i,2),_=o[0],h=o[1],f=c.a.useState(!1),O=Object(r.a)(f,2),C=O[0],N=O[1],y=c.a.useState(!1),S=Object(r.a)(y,2),L=S[0],P=S[1],E=c.a.useState(!1),T=Object(r.a)(E,2),U=T[0],D=T[1],A=c.a.useState(!1),z=Object(r.a)(A,2),I=z[0],w=z[1],R=c.a.useState(!1),M=Object(r.a)(R,2),V=M[0],q=M[1],F=c.a.useState(!1),J=Object(r.a)(F,2),B=J[0],H=J[1],K=c.a.useState(!1),Y=Object(r.a)(K,2),G=Y[0],Q=Y[1],W=c.a.useState(!1),X=Object(r.a)(W,2),Z=X[0],$=X[1],ee=c.a.useState([]),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],ce=c.a.useState(null),ie=Object(r.a)(ce,2),oe=ie[0],se=ie[1];function re(){h(!1),N(!1),P(!1),D(!1),w(!1),se(null)}return c.a.useEffect((function(){m.getInitialCards().then((function(e){ne(e)})).catch((function(e){return console.log(e)}))}),[]),c.a.useEffect((function(){m.getProfileInfo().then((function(e){n(e)})).catch((function(e){return console.log(e)}))}),[]),Object(u.jsx)(d.Provider,{value:a,children:Object(u.jsx)("div",{className:"page",tabIndex:"0",onKeyDown:U||L||_||I||C?function(e){27===e.keyCode&&re()}:null,children:Object(u.jsxs)("div",{className:"page__content",children:[Object(u.jsx)(l,{}),Object(u.jsx)(b,{onEditProfile:function(){h(!0)},onAddPlace:function(){N(!0)},onEditAvatar:function(){P(!0)},onCardClick:function(e){w(!0),se(e)},cards:ae,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===a._id}));m.changeLikeCardStatus(e._id,t).then((function(t){ne((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))})).catch((function(e){return console.log(e)}))},onCardDelete:function(e){D(!0),se(e)}}),Object(u.jsx)(p,{}),Object(u.jsx)(v,{isOpen:_,isLoading:V,onClose:re,onUpdateUser:function(e){q(!0),m.setProfileInfo(e).then((function(e){n(e),re()})).catch((function(e){return console.log(e)})).finally((function(){q(!1)}))}}),Object(u.jsx)(g,{isOpen:C,isLoading:B,onClose:re,onAddPlace:function(e){H(!0),m.addPlace({name:e.name,link:e.link}).then((function(e){ne([e].concat(Object(s.a)(ae))),re()})).catch((function(e){return console.log(e)})).finally((function(){H(!1)}))}}),Object(u.jsx)(j,{isOpen:I,card:oe,onClose:re}),Object(u.jsx)(x,{isOpen:L,isLoading:G,onClose:re,onUpdateAvatar:function(e){var t=e.avatar;Q(!0),m.changeAvatar(t).then((function(e){n(e),re()})).catch((function(e){console.log(e)})).finally((function(){Q(!1)}))}}),Object(u.jsx)(k,{card:oe,onClose:re,isOpen:U,isLoading:Z,onCardDelete:function(e){$(!0),m.removeCard(e._id).then((function(){ne((function(t){return t.filter((function(t){return t._id!==e._id}))})),re()})).catch((function(e){return console.log(e)})).finally((function(){return $(!1)}))}})]})})})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),i(e),o(e)}))};o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(C,{})}),document.getElementById("root")),N()}},[[16,1,2]]]);
//# sourceMappingURL=main.c0047b39.chunk.js.map